navigator.serviceWorker.register('./sw.js').then(function(a){console.log('yepp, Service worker is registered...');navigator.serviceWorker.controller&&(a.waiting&&navigator.serviceWorker.controller.postMessage({action:'skipWaiting'}),a.installing&&navigator.serviceWorker.addEventListener('statechange',function(){'installed'==navigator.serviceWorker.controller.state&&navigator.serviceWorker.controller.postMessage({action:'skipWaiting'})}),a.addEventListener('updatefound',function(){navigator.serviceWorker.addEventListener('statechange',function(){'installed'==navigator.serviceWorker.controller.state&&navigator.serviceWorker.controller.postMessage({action:'skipWaiting'})})}))}).catch(function(){console.log('Oh no, Service worker registration failed')});var refreshing;navigator.serviceWorker.addEventListener('controllerchange',function(){refreshing||(window.location.reload(),refreshing=!0)}),navigator.serviceWorker.ready.then(function(a){return a.sync.register('myFirstSync')});function onOnline(){console.log('online'),DBHelper.submitOfflineReviews()}function onOffline(){console.log('offline')}window.addEventListener('online',onOnline),window.addEventListener('offline',onOffline);